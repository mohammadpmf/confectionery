{% extends "_base.html" %}

{% load static %}
{% load i18n %}

{% load jalali_tags %}

{% load madval_persian_translation %}

{% block page_title %}
{% trans "discounts" %}
{% endblock page_title %}

{% block extra_css %}
<link href="{% static 'madval/css/discounts.css' %}" rel="stylesheet">
{% endblock extra_css %}

{% block content %}

<div dir="rtl" class="c container shadow my-5 p-5">
    <p class="c primary em1-4 mb-4">
        ุฏุฑ ุงู ุจุฎุด ู ุชูุงูุฏ ฺฉุฏูุง ุชุฎูู ุฑุง ูุดุงูุฏู ฺฉูุฏ.
    </p>
    <p class="c primary em1-4 mb-4">
        ุชูุถุญุงุช ูุฑุจูุท ุจู ฺฉุฏ ุชุฎูู:
        <ul>
            <li>ุฏุฑ ุตูุฑุช ฺฉู ุงุฒ ุฒูุงู ุชุงุฑุฎ ูุตุฑู ฺฉุฏ ฺฏุฐุดุชู ุจุงุดุฏุ ูุงุจู ุงุณุชูุงุฏู ูุณุช.</li>
            <li>ุฏุฑ ุตูุฑุช ฺฉู ุจู ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุงุณุชูุงุฏู ุงุฒ ฺฉุฏ ุชุฎูู ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุฑุณุฏู ุจุงุดุฏุ ุฏฺฏุฑ ุจุฑุง ุดูุง ูุงุจู ุงุณุชูุงุฏู ูุณุช.</li>
            <li>ุฏุฑ ุตูุฑุช ฺฉู ฺฉ ฺฉุฏ ุชุฎูู ุจู ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุงุณุชูุงุฏู ุฑุณุฏู ุจุงุดุฏ (ฺู ุชูุณุท ุดูุง ู ฺู ุชูุณุท ุณุงุฑ ฺฉุงุฑุจุฑุงู ุณุงุช) ุฏฺฏุฑ ุจุฑุง ฺฉุณ ูุงุจู ุงุณุชูุงุฏู ูุณุช.</li>
            <li>ุฏุฑ ุตูุฑุช ฺฉู ููุช ุณูุงุฑุด ุดูุง ุจุง ุชุฎูู ฺฉูุชุฑ ุงุฒ ฑฐ ูุฒุงุฑ ุชููุงู ุดูุฏุ ูุงุจู ุงุณุชูุงุฏู ูุณุช.</li>
            <li>
                ุฏุฑ ุตูุฑุช ฺฉู ฺฉุฏ ุชุฎูู ุฏุฑุตุฏ ุจุงุดุฏุ ุงุฒ ุญุฏุงฺฉุซุฑ ููุฏุงุฑ ุชุฎูู ูุงุจู ุงุนูุงู ุชุฌุงูุฒ 
                ูุฎูุงูุฏ ฺฉุฑุฏ. ุงูุง ุฏุฑ ุตูุฑุช ฺฉู ฺฉูุชุฑ ุจุงุดุฏ ุจู ุฏุฑุตุฏ ุญุณุงุจ ูุดูุฏ. ุจู ุทูุฑ ูุซูุง ุงฺฏุฑ ฺฉ ฺฉุฏ
                ุชุฎูู ตฐ ุฏุฑุตุฏ ู ุจุง ุณูู ุฏูุณุช ูุฒุงุฑ ุชููุงู ุจุงุดุฏุ ุฏุฑ ุตูุฑุช ฺฉู ุฌูุน ฺฉู ุณุจุฏ ุฎุฑุฏ ุดูุง
                ุฒุฑ ฺูุงุฑุตุฏ ูุฒุงุฑ ุชููุงู ุจุงุดุฏุ ูพูุฌุงู ุฏุฑุตุฏ ุชุฎูู ุงุนูุงู ูุดูุฏ ู ุฏุฑ ุตูุฑุช ฺฉู ุฌูุน ฺฉู
                ุณุจุฏ ุฎุฑุฏ ุดูุง ุจุงูุง ฺูุงุฑุตุฏ ูุฒุงุฑ ุชููุงู ุจุงุดุฏุ ุชุฎูู ุดูุง ุฏูุณุช ูุฒุงุฑ ุชููุงู ุฎูุงูุฏ ุดุฏ.
            </li>
            <li>
                ฺฉุฏูุง ฺฉู ูููุถ ุดุฏู ุงูุฏุ ุจุง ุฑูฺฏ ูุฑูุฒ ูุดุฎุต ุดุฏู ุงูุฏ. ุงฺฏุฑ ฺฉุฏ ูููุฒ ุจู ูพุงุงู ุชุงุฑุฎ
                ุฎูุฏ ูุฑุณุฏู ุงุณุช ุงูุง ูุฑูุฒ ุดุฏู ุงุณุชุ ุงู ฺฉุฏ ุจุฑุง ุดูุง ูููุถ ุดุฏู ุงุณุช. ฺุฑุง ฺฉู ูุจูุง ุงุฒ ุขู
                ุงุณุชูุงุฏู ฺฉุฑุฏู ุงุฏ ู ุจู ูุญุฏูุฏุช ุงุณุชูุงุฏู ุจุฑุง ุดูุง ุฑุณุฏู ุงุณุช. ู ุง ููู ฺฉุงุฑุจุฑุงู ุณุงุช
                ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุฏุ ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุงุณุชูุงุฏู ุงุฒ ฺฉุฏ ุฑุง ุจู ูพุงุงู ุฑุณุงูุฏู ุงุฏ.
            </li>
        </ul>
    </p>
    <p>
        ุงุฒ ฺฉุฏูุง ุชุฎูู ุฒุฑ ูุฐุช ุจุจุฑุฏ ๐
    </p>
    {% if user.is_authenticated %}
    <h1 class='c text-primary my-3 mt-5'>
        ฺฉุฏูุง ุชุฎูู ุงุฎุชุตุงุต ูุฎุตูุต ฺฉุงุฑุจุฑุงู ูฺู
    </h1>
    <table class="table table-sm table-hover table-dark">
        <tr>
            <th style="width: 4%">ุฑุฏู</th>
            <th style="width: 12%">ฺฉุฏ ุชุฎูู</th>
            <th style="width: 12%">ููุฏุงุฑ ุชุฎูู</th>
            <th style="width: 12%">ุญุฏุงฺฉุซุฑ ููุฏุงุฑ ุชุฎูู ูุงุจู ุงุนูุงู</th>
            <th style="width: 12%">ูุญุฏูุฏุช ุงุณุชูุงุฏู</th>
            <th style="width: 12%">ูุญุฏูุฏุช ุงุณุชูุงุฏู ุจุฑุง ฺฉ ุญุณุงุจ ฺฉุงุฑุจุฑ</th>
            <th style="width: 12%">ุชุนุฏุงุฏ ุฏูุนุงุช ุงุณุชูุงุฏู ุดุฏู ุชูุณุท ุดูุง ({{ user.username }})</th>
            <th style="width: 12%">ุชุนุฏุงุฏ ุฏูุนุงุช ุงุณุชูุงุฏู ุดุฏู ุชูุณุท ุชูุงู ฺฉุงุฑุจุฑุงู ูฺู</th>
            <th style="width: 12%">ุชุงุฑุฎ ูุตุฑู</th>
        </tr>
        {% for discount in special_discounts %}
        {% if discount.0.is_expired or discount.0.same_user_limit == discount.1 %}
        <tr class="table-danger">
        {% else %}
        <tr class="table-info">
        {% endif %}
            <td>{{ forloop.counter|pn }}</td>
            <td>{{ discount.0.text }}</td>
            <td>
                {% if discount.0.discount_amount %}
                    {{ discount.0.discount_amount|cspn }} ุชููุงู
                {% else %}
                {% widthratio discount.0.discount_percentage 1 100 as percentage %}
                    {{ percentage|cspn }} ุฏุฑุตุฏ
                {% endif %}
            </td>
            <td>
                {% if discount.0.discount_amount %}
                    {{ discount.0.discount_amount|cspn }}
                {% else %}
                    {{ discount.0.max_discount_amount|cspn }}
                {% endif %}
                ุชููุงู
            </td>
            <td>
                {% if discount.0.limit > 10000 %}
                    ูุงูุญุฏูุฏ
                {% else %}
                    {{ discount.0.limit|cspn }} ุจุงุฑ
                {% endif %}
            </td>
            <td>
                {% if discount.0.same_user_limit > 10000 %}
                    ูุงูุญุฏูุฏ
                {% else %}
                    {{ discount.0.same_user_limit|cspn }} ุจุงุฑ
                {% endif %}
            </td>
            <td>{{ discount.1|pn }} ุจุงุฑ</td>
            <td>{{ discount.0.used_times|pn }} ุจุงุฑ</td>
            {% if discount.0.is_expired %}
            <td> ูููุถ ุดุฏู! </td>
            {% else %}
            <td>{{ discount.0.expiration_date|to_jalali:'%A'|p_weekday }} {{ discount.0.expiration_date|to_jalali:'%Y/%m/%d'|pn }} </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
    <hr>
    {% endif %}
    <h1 class='c text-primary my-3 mt-5'>
        ฺฉุฏูุง ุชุฎูู ุนููู ูุงุจู ุงุณุชูุงุฏู ุจุฑุง ุชูุงู ฺฉุงุฑุจุฑุงู ุณุงุช
    </h1>
    <table class="table table-sm table-hover table-dark">
        <tr>
            <th style="width: 4%">ุฑุฏู</th>
            <th style="width: 12%">ฺฉุฏ ุชุฎูู</th>
            <th style="width: 12%">ููุฏุงุฑ ุชุฎูู</th>
            <th style="width: 12%">ุญุฏุงฺฉุซุฑ ููุฏุงุฑ ุชุฎูู ูุงุจู ุงุนูุงู</th>
            <th style="width: 12%">ูุญุฏูุฏุช ุงุณุชูุงุฏู</th>
            <th style="width: 12%">ูุญุฏูุฏุช ุงุณุชูุงุฏู ุจุฑุง ฺฉ ุญุณุงุจ ฺฉุงุฑุจุฑ</th>
            {% if user.is_authenticated %}
            <th style="width: 12%">ุชุนุฏุงุฏ ุฏูุนุงุช ุงุณุชูุงุฏู ุดุฏู ุชูุณุท ุดูุง ({{ user.username }})</th>
            {% endif %}
            <th style="width: 12%">ุชุนุฏุงุฏ ุฏูุนุงุช ุงุณุชูุงุฏู ุดุฏู ุชูุณุท ุชูุงู ฺฉุงุฑุจุฑุงู ุณุงุช</th>
            <th style="width: 12%">ุชุงุฑุฎ ูุตุฑู</th>
        </tr>
        {% for discount in unlimited_discounts %}
        {% if discount.0.is_expired or discount.0.same_user_limit == discount.1 %}
        <tr class="table-danger">
        {% else %}
        <tr class="table-info">
        {% endif %}
            <td>{{ forloop.counter|pn }}</td>
            <td>{{ discount.0.text }}</td>
            <td>
                {% if discount.0.discount_amount %}
                    {{ discount.0.discount_amount|cspn }} ุชููุงู
                {% else %}
                {% widthratio discount.0.discount_percentage 1 100 as percentage %}
                    {{ percentage|cspn }} ุฏุฑุตุฏ
                {% endif %}
            </td>
            <td>
                {% if discount.0.discount_amount %}
                    {{ discount.0.discount_amount|cspn }}
                {% else %}
                    {{ discount.0.max_discount_amount|cspn }}
                {% endif %}
                ุชููุงู
            </td>
            <td>
                {% if discount.0.limit > 10000 %}
                    ูุงูุญุฏูุฏ
                {% else %}
                    {{ discount.0.limit|cspn }} ุจุงุฑ
                {% endif %}
            </td>
            <td>
                {% if discount.0.same_user_limit > 10000 %}
                    ูุงูุญุฏูุฏ
                {% else %}
                    {{ discount.0.same_user_limit|cspn }} ุจุงุฑ
                {% endif %}
            </td>
            {% if user.is_authenticated %}
            <td>{{ discount.1|pn }} ุจุงุฑ</td>
            {% endif %}
            <td>{{ discount.0.used_times|pn }} ุจุงุฑ</td>
            {% if discount.0.is_expired %}
            <td> ูููุถ ุดุฏู! </td>
            {% else %}
            <td>{{ discount.0.expiration_date|to_jalali:'%A'|p_weekday }} {{ discount.0.expiration_date|to_jalali:'%Y/%m/%d'|pn }} </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock content %}


{% block active_discount_codes %}active{% endblock active_discount_codes %}
